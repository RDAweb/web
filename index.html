<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Browser with Tabs, History, and Bookmarks</title>
    <style>
      body, html {
          margin: 0;
          padding: 0;
          height: 100%;
          display: flex;
          flex-direction: column;
          font-family: Arial, sans-serif;
      }

      #tabs {
          display: flex;
          background-color: #eee;
          padding: 10px;
          overflow-y: hidden;
          overflow-x: auto;
      }

      .tab {
          width: 25%;
          margin-right: 10px;
          padding: 5px 10px;
          background-color: #007BFF;
          color: white;
          border-radius: 4px;
          display: flex;
          align-items: center;
          min-width: 120px; /* Ensure a minimum width for smaller screens */
      }

      .close {
          margin-left: auto;
          background-color: transparent;
          padding: 0 5px;
          cursor: pointer;
          border-radius: 50%;
          font-weight: bold;
      }

      .active-tab {
          background-color: #0056b3;
      }

      .navbar {
          display: flex;
          padding: 10px;
          background-color: #f0f0f0;
          align-items: center;
      }

      #url {
          flex-grow: 1;
          padding: 8px;
          font-size: 16px;
      }

      button {
          padding: 8px 12px;
          font-size: 16px;
          cursor: pointer;
          background-color: #007BFF;
          color: white;
          border: none;
          margin-left: 5px;
          border-radius: 4px;
      }

      #bookmark-button {
          background-color: #28a745;
      }

      iframe {
          width: 100%;
          height: calc(100vh - 120px); /* Take up the remaining height, adjust this if needed */
          border: none;
          background: url(easy.jpg);
          background-size: contain;
          background-repeat: no-repeat;
      }

      #bookmarks {
          padding: 10px;
          background-color: #eee;
          margin-top: 10px;
          max-height: 80px;
          overflow-y: scroll;
      }

      .bookmark {
          cursor: pointer;
          color: blue;
          text-decoration: underline;
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
          .tab {
              width: 20%; /* Adjust the tab width for medium screens */
          }
      }

      @media (max-width: 768px) {
          .tab {
              width: 30%; /* Adjust tab width for tablets */
              padding: 5px;
          }

          button, #url {
              font-size: 14px;
              padding: 6px;
          }

          iframe {
              height: calc(100vh - 100px); /* Adjust iframe height for smaller devices */
          }
      }

      @media (max-width: 480px) {
          .tab {
              width: 50%; /* Tabs take up more width on small screens */
          }

          button, #url {
              font-size: 12px;
              padding: 5px;
          }

          iframe {
              height: calc(100vh - 90px); /* Adjust iframe height for phones */
          }

          .navbar {
              flex-wrap: wrap;
          }

          #url {
              flex-basis: 100%;
              margin-bottom: 10px;
          }
      }
  </style>
</head>
<body>

  <div id="tabs"></div>

  <div class="navbar">
      <button onclick="addTab()">New Tab</button>
      <input type="text" id="url" placeholder="Enter URL and History will Not Saved" />
      <button onclick="navigate()">Go</button>
      <button onclick="goBack()">Back</button>
      <button onclick="goForward()">Forward</button>
    </div>
    <div class="navsets">
      <button id="bookmark-button" onclick="addBookmark()">Bookmark</button>
        <a href="style.html">modified</a>

  <iframe id="browser" src="https://www..com" onload="updateTabTitle()"></iframe>

  <div id="bookmarks">
      <h3>Bookmarks</h3>
      <ul id="bookmark-list"></ul>
  </div>
</div>
    <script>
        // Variables to keep track of tabs, history, and bookmarks
        let tabs = [];
        let currentTabIndex = 0;
        let bookmarks = [];

        // Function to create a new tab
        function addTab() {
            const newTab = {
                id: tabs.length,
                history: [''],
                currentHistoryIndex: 0,
                title: 'Loading...' // Placeholder title
            };
            tabs.push(newTab);
            currentTabIndex = newTab.id;
            renderTabs();
            loadURL(newTab.history[0]);
        }

        // Function to render tabs with website title
        function renderTabs() {
            const tabsContainer = document.getElementById('tabs');
            tabsContainer.innerHTML = '';
            tabs.forEach((tab, index) => {
                const tabElement = document.createElement('div');
                tabElement.classList.add('tab');
                if (index === currentTabIndex) {
                    tabElement.classList.add('active-tab');
                }
                tabElement.innerText = tab.title; // Display the title of the tab

                // Add a close button (X) to each tab
                const closeButton = document.createElement('span');
                closeButton.classList.add('close');
                closeButton.innerText = 'X';
                closeButton.onclick = (event) => {
                    event.stopPropagation(); // Prevent triggering tab switch
                    closeTab(index);
                };
                tabElement.appendChild(closeButton);

                tabElement.onclick = () => switchTab(index);
                tabsContainer.appendChild(tabElement);
            });
        }

        // Function to close a tab
        function closeTab(index) {
            // Remove tab from array
            tabs.splice(index, 1);

            // Adjust currentTabIndex if necessary
            if (currentTabIndex >= index && currentTabIndex > 0) {
                currentTabIndex--;
            }

            // If there are no more tabs, create a new one
            if (tabs.length === 0) {
                addTab();
            } else {
                // Load the URL of the current tab
                renderTabs();
                loadURL(tabs[currentTabIndex].history[tabs[currentTabIndex].currentHistoryIndex]);
            }
        }

        // Function to switch between tabs
        function switchTab(index) {
            currentTabIndex = index;
            const currentTab = tabs[currentTabIndex];
            loadURL(currentTab.history[currentTab.currentHistoryIndex]);
            renderTabs();
        }

        // Function to navigate to a URL
        function navigate() {
            const urlInput = document.getElementById('url').value;
            let url = urlInput.startsWith('http://') || urlInput.startsWith('https://') ? urlInput : `http://${urlInput}`;
            const currentTab = tabs[currentTabIndex];
            currentTab.history.push(url);
            currentTab.currentHistoryIndex++;
            loadURL(url);
        }

        // Function to load URL in iframe
        function loadURL(url) {
            const iframe = document.getElementById('browser');
            iframe.src = url;
            document.getElementById('url').value = url;

            // Update the tab title to 'Loading...' until the page title is retrieved
            tabs[currentTabIndex].title = 'Loading...';
            renderTabs();
        }

        // Function to extract and display a simplified URL in the tab title
        function getDomainName(url) {
            // Create an anchor element to easily parse the URL
            const a = document.createElement('a');
            a.href = url;

            // Extract hostname (e.g., www.youtube.com)
            let hostname = a.hostname;

            // Remove 'www.' prefix if present
            if (hostname.startsWith('www.')) {
                hostname = hostname.substring(4);
            }

            // Return only the domain name (e.g., youtube)
            return hostname.split('.')[0];
        }

        // Function to update the tab title based on the page's title or simplified URL
        function updateTabTitle() {
            const iframe = document.getElementById('browser');
            try {
                const title = iframe.contentWindow.document.title || getDomainName(iframe.src);
                tabs[currentTabIndex].title = title; // Set tab title to the page title
            } catch (error) {
                // If we can't access the title due to cross-origin, use the simplified domain instead
                tabs[currentTabIndex].title = getDomainName(iframe.src);
            }
            renderTabs();
        }

        // Function to go back in history
        function goBack() {
            const currentTab = tabs[currentTabIndex];
            if (currentTab.currentHistoryIndex > 0) {
                currentTab.currentHistoryIndex--;
                loadURL(currentTab.history[currentTab.currentHistoryIndex]);
            }
        }

        // Function to go forward in history
        function goForward() {
            const currentTab = tabs[currentTabIndex];
            if (currentTab.currentHistoryIndex < currentTab.history.length - 1) {
                currentTab.currentHistoryIndex++;
                loadURL(currentTab.history[currentTab.currentHistoryIndex]);
            }
        }

        // Function to add a bookmark
        function addBookmark() {
            const currentTab = tabs[currentTabIndex];
            const currentURL = currentTab.history[currentTab.currentHistoryIndex];
            bookmarks.push(currentURL);
            renderBookmarks();
        }

        // Function to render bookmarks
        function renderBookmarks() {
            const bookmarkList = document.getElementById('bookmark-list');
            bookmarkList.innerHTML = '';
            bookmarks.forEach((bookmark, index) => {
                const bookmarkElement = document.createElement('li');
                bookmarkElement.classList.add('bookmark');
                bookmarkElement.innerText = bookmark;
                bookmarkElement.onclick = () => loadURL(bookmark);
                bookmarkList.appendChild(bookmarkElement);
            });
        }

        // Initialize the first tab
        addTab();

        function loadURL(url) {
    // Use the proxy for YouTube
    const proxyUrl = url.includes('youtube.com') ? `http://localhost:3000/proxy?url=${encodeURIComponent(url)}` : url;
    
    document.getElementById('browser').src = proxyUrl;
    document.getElementById('url').value = url;
    tabs[currentTabIndex].title = 'Loading...';
    renderTabs();
}
    </script>
</body>
</html>
